{#
 # Homepage template
 # ---------------
 #
 # When this template gets loaded, it will be because someone has accessed
 # http://yoursite.com/ (without any URI). Craft checks to see if you have
 # a Single section set to be the Homepage (as you do, by default), and
 # loads the section’s Template (this file). A special ‘entry’ variable
 # will already be set for you, assigned to the Homepage entry.
 #
 # It's worth noting that even if you didn't have a Homepage Single section,
 # as long as this template remains at craft/templates/index.html, it
 # would still be the one to get loaded when accessing http://yoursite.com/,
 # albeit without an ‘entry’ variable already set for you.
 #
 # See this page for more details on how Craft routes requests:
 # http://buildwithcraft.com/docs/routing
 #}

{% set isAjax = (craft.request.getQuery("ajax") == "true") ? true : false %}
{% extends isAjax ? "_extends/_main-content" : "_extends/_main" %}

{% block content %}
<div id="projects">
	<ul>
		{% for entry in craft.entries.section('portfolio').order('year desc').find() %}
			{% if entry.portfolioCategory.first() == 'Projects' %}
			<li>
				<div class="text-container">
					<div class="inner">
						<time class="subheading above">{{ entry.year }}</time>
						<h4>{{ entry.title }}</h4>
						<p class="description">{{ entry.shortDescription }}</p>
						<a href="{{ entry.url }}" class="bordered-button" data-ajax="true">{{ Copy.viewProject }}</a>
					</div>
				</div>
				<div class="preview">
					<div class="image" style="background-image:url({{ entry.previewImage[0].url }})"></div>
				</div>
			</li>
			{% endif %}
		{% endfor %}
	</ul>
</div>
{% endblock %}