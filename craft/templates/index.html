{#
 # Homepage template
 # ---------------
 #
 # When this template gets loaded, it will be because someone has accessed
 # http://yoursite.com/ (without any URI). Craft checks to see if you have
 # a Single section set to be the Homepage (as you do, by default), and
 # loads the section’s Template (this file). A special ‘entry’ variable
 # will already be set for you, assigned to the Homepage entry.
 #
 # It's worth noting that even if you didn't have a Homepage Single section,
 # as long as this template remains at craft/templates/index.html, it
 # would still be the one to get loaded when accessing http://yoursite.com/,
 # albeit without an ‘entry’ variable already set for you.
 #
 # See this page for more details on how Craft routes requests:
 # http://buildwithcraft.com/docs/routing
 #}

{% set isAjax = (craft.request.getQuery("ajax") == "true") ? true : false %}
{% extends isAjax ? "_extends/_main-content" : "_extends/_main" %}

{% import "_imports/_utils" as utils %}

{% block content %}
<div id="projects">
	<ul>
		{% set count = 0 %}
		{% for entry in craft.entries.section('portfolio').order('year desc').find() %}
			{% if entry.portfolioCategory.first() == 'Projects' %}
			<li class="i{{ count % 6 + 1 }}">
				<div class="preview">
					<div class="image" style="{{ utils.retinaBackground(entry.previewImage[0], 600) }}"
						data-lightbox-id="{{ entry.id }}"></div>
				</div>
				<div class="text-container">
					<div class="inner">
						<h5 class="subheading above">{{ entry.genre }}</h5>
						<h4>{{ entry.heading|nl2br }}</h4>
						<p class="description">{{ entry.shortDescription }}</p>
						
						{% include "_includes/_bordered-button"
							with {'href': entry.url, 'text': Copy.viewProject, 'ajax': true, 'loaderId': entry.id} %}
					</div>
				</div>
			</li>
			
			<hr class="i{{ count % 6 + 1 }}">
			
			{% set count = count + 1 %}

			{% endif %}
		{% endfor %}
	</ul>

	{% include "_includes/_footer" %}
</div>
{% endblock %}